create_artifact_cfp_chess_set_effect = {
	# Get the character the artifact is being made for.
	$OWNER$ = { save_scope_as = owner }
	
	hidden_effect_new_artifact = {
		
		# Military education gives a nicer chess set
		if = { 
			random_list = { 
				40 = {
					trigger = {	has_trait = education_martial_4 }
					set_artifact_rarity_illustrious = yes
				}
				40 = {
					trigger = {
						OR = {
							has_trait = education_martial_3
							has_trait = education_martial_2
						}
					}
					set_artifact_rarity_famed = yes
				}
				40 = {
					trigger = {	has_trait = education_martial_1 }
					set_artifact_rarity_masterwork = yes
				}
				1 = {
					set_artifact_rarity_common = yes
				}
			}
		}
		
		# Get artifact quality, wealth, and materials
		# get_artifact_quality_effect = yes
		# get_artifact_wealth_effect = yes
		# if = { #If we have set the location we use it for the materials
			# limit = { exists = scope:location }
			# scope:location = { title_province = { add_to_list = artifact_material_sources } }
		# }

		scope:owner = {
			# Create the artifact
			create_artifact = {
				name = artifact_cfp_chess_set_01_name
				# creator = scope:owner
				description = placeholder
				visuals = cfp_chess_set
				type = pedestal
				wealth = scope:wealth
				quality = scope:quality
				modifier = artifact_monthly_martial_lifestyle_xp_1_modifier
				history = {
					type = created_before_history
				}
				save_scope_as = newly_created_artifact
			}
		}

		scope:newly_created_artifact = {
			get_artifact_feature_references_effect = yes
			set_artifact_description = artifact_cfp_chess_set_01_description

			if = {
				limit = {
					rarity = illustrious
				}
				random_list = {
					15 = { add_artifact_modifier = artifact_martial_1_modifier }
					10 = { add_scaled_artifact_modifier_prestige_effect = yes }
					10 = { add_artifact_modifier = artifact_stress_gain_3_modifier }
					5 = { add_scaled_artifact_modifier_grandeur_small_effect = yes }
				}
				add_artifact_modifier = artifact_monthly_martial_lifestyle_xp_4_modifier
				add_2_scaled_artifact_modifier_combat_effect = yes
				
			}
			else_if = {
				limit = {
					rarity = famed
				}
				random_list = {
					10 = { add_artifact_modifier = artifact_martial_1_modifier }
					10 = { add_scaled_artifact_modifier_minor_prestige_effect = yes }
					10 = { add_artifact_modifier = artifact_stress_gain_2_modifier }
				}
				add_artifact_modifier = artifact_monthly_martial_lifestyle_xp_3_modifier
				add_scaled_artifact_modifier_combat_effect = yes
			}
			else_if = {
				limit = {
					rarity = masterwork
				}
				random_list = {
					5 = { add_artifact_modifier = artifact_martial_1_modifier }
					10 = { add_scaled_artifact_modifier_minor_prestige_effect = yes }
					15 = { add_artifact_modifier = artifact_stress_gain_1_modifier }
				}
				add_artifact_modifier = artifact_monthly_martial_lifestyle_xp_2_modifier
				add_scaled_artifact_modifier_combat_effect = yes
			} 
			else_if = {
				limit = {
					rarity = common
				}
				random_list = {
					10 = { add_artifact_modifier = artifact_monthly_martial_lifestyle_xp_1_modifier }
					2 = { add_artifact_modifier = artifact_martial_1_modifier }
					5 = { add_scaled_artifact_modifier_minor_prestige_effect = yes }
					5 = { add_artifact_modifier = artifact_stress_gain_1_modifier }
				}
				add_scaled_artifact_modifier_combat_effect = yes
			}
		}
	}
}
