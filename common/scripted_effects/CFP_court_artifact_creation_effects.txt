## Games
create_artifact_cfp_chess_set_effect = {
	# Get the character the artifact is being made for.
	$OWNER$ = { save_scope_as = owner }
	$MAKER$ = { save_scope_as = maker }
	
	hidden_effect_new_artifact = {
		
		# Military education gives a nicer chess set
		if = {
			limit = {
				NOT = { scope:owner = { has_character_flag = paid_for_cheap_chess_set } }
				OR = {
					scope:owner = { has_trait = education_martial_4 }
					scope:owner = { has_trait = education_martial_3 }
				}
			}
			set_artifact_rarity_illustrious = yes
		}
		else_if = {
			limit = {
				NOT = { scope:owner = { has_character_flag = paid_for_cheap_chess_set } }
				OR = {
					scope:owner = { has_trait = education_martial_2 }
				}
			}
			set_artifact_rarity_famed = yes
		}
		else_if = {
			limit = {
				NOT = { scope:owner = { has_character_flag = paid_for_cheap_chess_set } }
				OR = {
					scope:owner = { has_trait = education_martial_1 }
				}
			}
			set_artifact_rarity_masterwork = yes
		}
		else_if = {
			limit = { scope:owner = { has_character_flag = paid_for_cheap_chess_set } }
			set_artifact_rarity_common = yes
		}
		else = {
			get_artifact_quality_effect = yes
			get_artifact_wealth_effect = yes
		}
		
		scope:owner = {
			create_artifact = {
				name = artifact_cfp_chess_set_01_name
				description = placeholder
				visuals = cfp_chess_set
				type = pedestal
				wealth = scope:wealth
				quality = scope:quality
				creator = scope:maker
				modifier = artifact_placeholder_modifier
				save_scope_as = newly_created_artifact
			}
		}

		scope:newly_created_artifact = {
			set_artifact_description = artifact_cfp_chess_set_01_description
			set_variable = { name = cfp_chess_set_var value = yes }

			if = {
				limit = {
					rarity = illustrious
				}
				random_list = {
					15 = { add_artifact_modifier = artifact_martial_1_modifier }
					10 = { add_scaled_artifact_modifier_prestige_effect = yes }
					10 = { add_artifact_modifier = artifact_stress_gain_3_modifier }
					5 = { add_scaled_artifact_modifier_grandeur_small_effect = yes }
				}
				add_artifact_modifier = artifact_monthly_martial_lifestyle_xp_4_modifier
				add_2_scaled_artifact_modifier_combat_effect = yes
				
			}
			else_if = {
				limit = {
					rarity = famed
				}
				random_list = {
					10 = { add_artifact_modifier = artifact_martial_1_modifier }
					10 = { add_scaled_artifact_modifier_minor_prestige_effect = yes }
					10 = { add_artifact_modifier = artifact_stress_gain_2_modifier }
				}
				add_artifact_modifier = artifact_monthly_martial_lifestyle_xp_3_modifier
				add_scaled_artifact_modifier_combat_effect = yes
			}
			else_if = {
				limit = {
					rarity = masterwork
				}
				random_list = {
					5 = { add_artifact_modifier = artifact_martial_1_modifier }
					10 = { add_scaled_artifact_modifier_minor_prestige_effect = yes }
					15 = { add_artifact_modifier = artifact_stress_gain_1_modifier }
				}
				add_artifact_modifier = artifact_monthly_martial_lifestyle_xp_2_modifier
				add_scaled_artifact_modifier_combat_effect = yes
			} 
			else_if = {
				limit = {
					rarity = common
				}
				random_list = {
					10 = { add_artifact_modifier = artifact_monthly_martial_lifestyle_xp_1_modifier }
					2 = { add_artifact_modifier = artifact_martial_1_modifier }
					5 = { add_scaled_artifact_modifier_minor_prestige_effect = yes }
					5 = { add_artifact_modifier = artifact_stress_gain_1_modifier }
				}
				add_scaled_artifact_modifier_combat_effect = yes
			}
			
			remove_artifact_modifier = artifact_placeholder_modifier
		}
	}
}

## Weapons
create_artifact_cfp_kris_dagger_effect = {
	# Get the character the artifact is being made for.
	$OWNER$ = { save_scope_as = owner }
	
	hidden_effect_new_artifact = {
	# Intrigue education gives a nicer dagger
		if = {
			limit = {
				OR = {
					scope:owner = { has_trait = education_intrigue_4 }
					scope:owner = { has_trait = education_intrigue_3 }
				}
			}
			set_artifact_rarity_illustrious = yes
		}
		else_if = {
			limit = {
				OR = {
					scope:owner = { has_trait = education_intrigue_2 }
					scope:owner = { has_trait = education_intrigue_1 }
				}
			}
			set_artifact_rarity_famed = yes
		}
		else = {
			get_artifact_quality_effect = yes
			get_artifact_wealth_effect = yes
		}
		
		scope:owner = {
			create_artifact = {
				name = artifact_cfp_kris_dagger_name
				description = placeholder
				visuals = cfp_kris_dagger
				type = pedestal
				wealth = scope:wealth
				quality = scope:quality
				history = {
					type = created_before_history
					date = 670.1.1 #To order entries correctly
				}
				modifier = artifact_placeholder_modifier
				save_scope_as = newly_created_artifact
			}
		}

		scope:newly_created_artifact = {
		
			set_artifact_description = artifact_cfp_kris_dagger_description
			set_variable = { name = cfp_kris_dagger_var value = yes }
			
			if = {
				limit = { rarity = illustrious }
				random_list = {
					15 = { add_artifact_modifier = artifact_intrigue_1_modifier }
					10 = { add_scaled_artifact_modifier_prestige_effect = yes }
					5 = { add_artifact_modifier = artifact_hostile_scheme_power_add_6_modifier }
					5 = { add_artifact_modifier = artifact_owned_hostile_scheme_success_chance_add_6_modifier }
				}
				add_artifact_modifier = artifact_monthly_intrigue_lifestyle_xp_3_modifier
				add_artifact_modifier = artifact_scheme_resistance_add_2_modifier
			}
			else_if = {
				limit = { rarity = famed }
				random_list = {
					10 = { add_artifact_modifier = artifact_intrigue_1_modifier }
					10 = { add_scaled_artifact_modifier_minor_prestige_effect = yes }
					5 = { add_artifact_modifier = artifact_hostile_scheme_power_add_4_modifier }
					5 = { add_artifact_modifier = artifact_owned_hostile_scheme_success_chance_add_4_modifier }
				}
				add_artifact_modifier = artifact_monthly_intrigue_lifestyle_xp_2_modifier
				add_artifact_modifier = artifact_scheme_resistance_add_1_modifier
			}
			else_if = {
				limit = { rarity = masterwork }
				random_list = {
					5 = { add_artifact_modifier = artifact_intrigue_1_modifier }
					10 = { add_scaled_artifact_modifier_minor_prestige_effect = yes }
					7 = { add_artifact_modifier = artifact_hostile_scheme_power_add_2_modifier }
					7 = { add_artifact_modifier = artifact_owned_hostile_scheme_success_chance_add_2_modifier }
				}
				add_artifact_modifier = artifact_monthly_intrigue_lifestyle_xp_1_modifier
				add_artifact_modifier = artifact_intrigue_per_stress_level_2_modifier
			}
			else_if = {
				limit = { rarity = common }
				random_list = {
					10 = { add_artifact_modifier = artifact_monthly_martial_lifestyle_xp_1_modifier }
					2 = { add_artifact_modifier = artifact_martial_1_modifier }
					5 = { add_scaled_artifact_modifier_minor_prestige_effect = yes }
					5 = { add_artifact_modifier = artifact_stress_gain_1_modifier }
				}
				add_artifact_modifier = artifact_intrigue_per_stress_level_1_modifier
			}
			
			remove_artifact_modifier = artifact_placeholder_modifier
		}
	}
}

create_artifact_cfp_iron_dagger_effect = {

	$OWNER$ = { save_scope_as = owner }
	
	hidden_effect_new_artifact = {
	
		set_artifact_rarity_illustrious = yes
		
		scope:owner = {
			create_artifact = {
				name = artifact_cfp_iron_dagger_name
				description = artifact_cfp_iron_dagger_description
				template = general_unique_template
				type = pedestal
				visuals = cfp_iron_dagger
				wealth = scope:wealth
				quality = scope:quality
				history = {
					type = created_before_history
					date = 670.1.1 #To order entries correctly
				}
				modifier = artifact_placeholder_modifier
				save_scope_as = newly_created_artifact
				decaying = no
			}
		}

		scope:newly_created_artifact = {
			add_scaled_artifact_modifier_intrigue_effect = yes
			add_scaled_artifact_modifier_minor_prestige_effect = yes
			remove_artifact_modifier = artifact_placeholder_modifier
		}
	}
}

## Statues
create_artifact_cfp_potato_jesus_effect = {

	$OWNER$ = { save_scope_as = owner }
	$MAKER$ = { save_scope_as = maker }
	
	hidden_effect_new_artifact = {
		
		set_artifact_rarity_common = yes
	
		# Create the artifact
		scope:owner = {
			create_artifact = {
				name = artifact_cfp_potato_jesus_name
				description = artifact_cfp_potato_jesus_description
				type = pedestal
				visuals = cfp_potato_jesus
				wealth = scope:wealth
				quality = scope:quality
				creator = scope:maker
				modifier = artifact_placeholder_modifier
				save_scope_as = newly_created_artifact
			}
		}

		scope:newly_created_artifact = {
			set_variable = { name = cfp_potato_jesus_var value = yes }
			add_scaled_artifact_modifier_devotion_effect = yes
			add_scaled_artifact_modifier_piety_effect = yes
			remove_artifact_modifier = artifact_placeholder_modifier
		}
	}
}

create_artifact_cfp_saint_statue_effect = {

	$OWNER$ = { save_scope_as = owner }
	$MAKER$ = { save_scope_as = maker }
	
	hidden_effect_new_artifact = {
		
		set_artifact_rarity_masterwork = yes
	
		# Create the artifact
		scope:owner = {
			create_artifact = {
				name = artifact_cfp_saint_statue_name
				description = artifact_cfp_saint_statue_description
				type = pedestal
				visuals = cfp_saint_statue
				wealth = scope:wealth
				quality = scope:quality
				creator = scope:maker
				modifier = artifact_placeholder_modifier
				save_scope_as = newly_created_artifact
			}
		}

		scope:newly_created_artifact = {
			set_variable = { name = cfp_saint_statue_var value = yes }
			add_scaled_artifact_modifier_devotion_effect = yes
			add_scaled_artifact_modifier_piety_effect = yes
			remove_artifact_modifier = artifact_placeholder_modifier
		}
	}
}

create_artifact_cfp_mary_statue_effect = {

	$OWNER$ = { save_scope_as = owner }
	$MAKER$ = { save_scope_as = maker }
	
	hidden_effect_new_artifact = {
		
		set_artifact_rarity_famed = yes
	
		# Create the artifact
		scope:owner = {
			create_artifact = {
				name = artifact_cfp_mary_statue_name
				description = artifact_cfp_mary_statue_description
				type = pedestal
				visuals = cfp_mary_statue
				wealth = scope:wealth
				quality = scope:quality
				creator = scope:maker
				modifier = artifact_placeholder_modifier
				save_scope_as = newly_created_artifact
			}
		}
		
		scope:newly_created_artifact = {
			set_variable = { name = cfp_mary_statue_var value = yes }
			add_2_scaled_artifact_modifier_devotion_effect = yes
			add_scaled_artifact_modifier_piety_effect = yes
			remove_artifact_modifier = artifact_placeholder_modifier
		}
	}
}
